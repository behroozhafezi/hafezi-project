hosts 
[webservers]
web01 ansible_host=192.168.1.100
web02 ansible_host=192.168.1.101

site.yml
- hosts: webservers
  become: yes
  
  tasks:
    - include: install-nginx.yml
    - include: configure-nginx.yml
    - include: deploy-website.yml
	
	
install-nginx.yml
- name: Install EPEL repository
  yum:
    name: epel-release
    state: present

- name: Install Nginx
  yum:
    name: nginx
    state: present


configure-nginx.yml
- name: Copy Nginx configuration file
  template:
    src: nginx.conf.j2
    dest: /etc/nginx/nginx.conf
  notify: Restart Nginx

- name: Copy website content
  copy:
    src: website/
    dest: /usr/share/nginx/html/
  notify: Restart Nginx

- name: Enable and start Nginx service
  systemd:
    name: nginx
    enabled: yes
    state: started

- name: Open firewall port for Nginx
  firewalld:
    service: http
    permanent: yes
    state: enabled
  notify: Reload firewall


deploy-website.yml
- name: Clone website repository
  git:
    repo: https://github.com/username/website.git
    dest: /usr/share/nginx/html
  notify: Restart Nginx


nginx.conf.j2
events {
  worker_connections 1024;
}

http {
  server {
    listen 80;
    server_name {{ ansible_host }};

    location / {
      root /usr/share/nginx/html;
      index index.html index.htm;
    }
  }
}


ansible-playbook site.yml

  